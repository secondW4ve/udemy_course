{"ast":null,"code":"var _jsxFileName = \"U:\\\\Java\\\\WaverApp\\\\frontend\\\\src\\\\Pages\\\\LoginPage.js\";\nimport React from 'react';\nimport Input from '../Components/Input';\nimport ButtonWithProgress from '../Components/ButtonWithProgress';\nimport { connect } from 'react-redux';\nexport class LoginPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      apiError: undefined,\n      pendingApiCall: false\n    };\n\n    this.onChangeUsername = event => {\n      const value = event.target.value;\n      this.setState({\n        username: value,\n        apiError: undefined\n      });\n    };\n\n    this.onChangePassword = event => {\n      const value = event.target.value;\n      this.setState({\n        password: value,\n        apiError: undefined\n      });\n    };\n\n    this.onClickLogin = () => {\n      const body = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      this.setState({\n        pendingApiCall: true\n      });\n      this.props.actions.postLogin(body).then(response => {\n        const action = {\n          type: 'login-success',\n          payload: { ...response.data,\n            password: this.state.password\n          }\n        };\n        this.props.dispatch(action);\n        this.setState({\n          pendingApiCall: false\n        }, () => {\n          this.props.history.push('/');\n        });\n      }).catch(error => {\n        if (error.response) {\n          this.setState({\n            apiError: error.response.data.message,\n            pendingApiCall: false\n          });\n        }\n      });\n    };\n  }\n\n  render() {\n    let disableSubmit = false;\n\n    if (this.state.username === '') {\n      disableSubmit = true;\n    }\n\n    if (this.state.password === '') {\n      disableSubmit = true;\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"div\", {\n      className: \"col-12 mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Input, {\n      label: \"Username\",\n      placeholder: \"Your username\",\n      value: this.state.username,\n      onChange: this.onChangeUsername,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-12 mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(Input, {\n      label: \"Password\",\n      placeholder: \"Your password\",\n      type: \"password\",\n      value: this.state.password,\n      onChange: this.onChangePassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, this.state.apiError && React.createElement(\"div\", {\n      className: \"col-12 mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, this.state.apiError))), React.createElement(\"div\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(ButtonWithProgress, {\n      onClick: this.onClickLogin,\n      disabled: disableSubmit || this.state.pendingApiCall,\n      text: \"Login\",\n      pendingApiCall: this.state.pendingApiCall,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })));\n  }\n\n}\nLoginPage.defaultProps = {\n  actions: {\n    postLogin: () => new Promise((resolve, reject) => resolve({}))\n  },\n  dispatch: () => {}\n};\nexport default connect()(LoginPage);","map":{"version":3,"sources":["U:/Java/WaverApp/frontend/src/Pages/LoginPage.js"],"names":["React","Input","ButtonWithProgress","connect","LoginPage","Component","state","username","password","apiError","undefined","pendingApiCall","onChangeUsername","event","value","target","setState","onChangePassword","onClickLogin","body","props","actions","postLogin","then","response","action","type","payload","data","dispatch","history","push","catch","error","message","render","disableSubmit","defaultProps","Promise","resolve","reject"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Input from '../Components/Input';\r\nimport ButtonWithProgress from '../Components/ButtonWithProgress';\r\nimport { connect } from 'react-redux';\r\n\r\nexport class LoginPage extends React.Component {\r\n\r\n    state = {\r\n        username: '',\r\n        password: '',\r\n        apiError: undefined,\r\n        pendingApiCall: false\r\n    }\r\n\r\n    onChangeUsername = (event) => {\r\n        const value = event.target.value;\r\n        this.setState({\r\n            username: value,\r\n            apiError: undefined\r\n        });\r\n    }\r\n\r\n    onChangePassword = (event) => {\r\n        const value = event.target.value;\r\n        this.setState({\r\n            password: value,\r\n            apiError: undefined\r\n        });\r\n    }\r\n\r\n    onClickLogin = () => {\r\n        const body = {\r\n            username: this.state.username,\r\n            password: this.state.password\r\n        }\r\n        this.setState({pendingApiCall: true})\r\n        this.props.actions\r\n            .postLogin(body)\r\n            .then((response) => {\r\n                const action = {\r\n                    type: 'login-success',\r\n                    payload: {\r\n                        ...response.data,\r\n                        password: this.state.password,\r\n                    }\r\n                };\r\n                this.props.dispatch(action);\r\n                this.setState({pendingApiCall: false}, () => {\r\n                    this.props.history.push('/');\r\n                })\r\n            })\r\n            .catch(error => {\r\n            if (error.response){\r\n                this.setState({apiError: error.response.data.message, pendingApiCall: false})\r\n            }        \r\n        });\r\n    }\r\n\r\n    render(){\r\n        let disableSubmit = false;\r\n        if (this.state.username === ''){\r\n            disableSubmit = true;\r\n        }\r\n        if (this.state.password === ''){\r\n            disableSubmit = true;\r\n        }\r\n\r\n        return (\r\n            <div className = \"container\">\r\n                <h1 className = \"text-center\">Login</h1>\r\n                <div className = \"col-12 mb-3\">\r\n                    <Input \r\n                        label = \"Username\" \r\n                        placeholder = \"Your username\" \r\n                        value = {this.state.username}\r\n                        onChange = {this.onChangeUsername}\r\n                    />\r\n                </div>\r\n                <div className = \"col-12 mb-3\">\r\n                    <Input \r\n                        label = \"Password\" \r\n                        placeholder = \"Your password\" \r\n                        type = \"password\"\r\n                        value = {this.state.password}\r\n                        onChange = {this.onChangePassword}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    {this.state.apiError && \r\n                    <div className = \"col-12 mb-3\">\r\n                        <div className = \"alert alert-danger\">\r\n                            {this.state.apiError}\r\n                        </div>\r\n                    </div>}\r\n                </div>\r\n                <div className = \"text-center\">\r\n                    <ButtonWithProgress \r\n                        onClick = {this.onClickLogin}\r\n                        disabled = {disableSubmit || this.state.pendingApiCall}\r\n                        text = \"Login\"\r\n                        pendingApiCall = {this.state.pendingApiCall}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nLoginPage.defaultProps = {\r\n    actions:{\r\n        postLogin: () => new Promise((resolve, reject) => resolve({}))\r\n    },\r\n    dispatch: () => {},\r\n}\r\n\r\nexport default connect()(LoginPage);"]},"metadata":{},"sourceType":"module"}